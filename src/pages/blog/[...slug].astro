---
import { formatDate } from "../../lib/utils";
import type { CollectionEntry } from "astro:content";
import { getCollection } from "astro:content";
import Prose from "../../components/prose.astro";
import InfoLayout from "../../layouts/InfoLayout.astro";
import { render } from "astro:content";

export async function getStaticPaths() {
  const articles = await getCollection("blog")
  return articles.map((article: any) => ({
    params: { slug: article.data.slug },
    props: { article },
  }))
}

const {article} = Astro.props as { article: CollectionEntry<"blog"> };
const { Content } = await render(article);
---
<InfoLayout title={article.data.title} frontmatter={article.data} >
    <section class="p-4 sm:pt-8 sm:px-12 pb-20 min-h-dvh">
        <Prose>
            <Content />
        </Prose>

        <p class="my-4 text-sm italic text-zinc-300">
            This is an excerpt from {`${article.data.author}'s`}
            <a href={article.data.originalLink} target="_blank" class="underline underline-offset-4 decoration-zinc-100 hover:decoration-white hover:text-white">
                {article.data.title}
            </a>
            repo. Check out the original for more details.
        </p>

    </section>
</InfoLayout>